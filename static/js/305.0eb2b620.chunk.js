"use strict";(self.webpackChunknutech_crud_test=self.webpackChunknutech_crud_test||[]).push([[305],{7305:function(a,e,r){r.r(e),r.d(e,{default:function(){return C}});var n=r(4165),t=r(3433),s=r(1413),i=r(7762),c=r(5861),u=r(9439),l=r(4925),o=r(7846),p=r(7027),g=r(4123),f=r(9389),m=r(2706),d=r(5518),h=r(2791),Z=r(6030),k=r(7117),x=r(9286),b=r(4261);function B(a,e,r){return v.apply(this,arguments)}function v(){return(v=(0,c.Z)((0,n.Z)().mark((function a(e,r,t){return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a){var n={type:e,title:r,content:t,okButtonProps:{className:"bg-purple-500"},onOk:function(){a(!0)}};"confirm"===e?g.Z.confirm(n):"error"===e?g.Z.error(n):"info"===e?g.Z.info(n):"success"===e?g.Z.success(n):"warn"!==e&&"warning"!==e||g.Z.warning(n)})));case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var w=r(184),N=["action","id","exit"],j=["namaBarang","hargaJual","hargaBeli","stock"],y=(0,w.jsxs)("div",{children:[(0,w.jsx)(x.Z,{}),(0,w.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),C=function(a){var e=a.action,r=a.id,x=a.exit,v=(0,l.Z)(a,N),C=(0,Z.FV)(k.c),J=(0,u.Z)(C,2),P=J[0],I=J[1],F=o.Z.useForm(),U=(0,u.Z)(F,1)[0],A=p.ZP.useMessage(),E=(0,u.Z)(A,2),H=E[0],T=E[1],_=(0,h.useState)(),D=(0,u.Z)(_,2),V=D[0],L=D[1];function M(){return(M=(0,c.Z)((0,n.Z)().mark((function a(){var s,i,c,u,l,o,p,g,f,m;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("NEW"!==e){a.next=13;break}return a.next=3,S();case 3:if(!a.sent){a.next=11;break}return s=O(),i=s.hargaBeli,c=s.hargaJual,u=s.namaBarang,l=s.stock,I((function(a){var e={id:(0,b.Z)(),hargaBeli:i,hargaJual:c,namaBarang:u,stock:Number(null!==l&&void 0!==l?l:"0"),image:V};return[].concat((0,t.Z)(a),[e])})),a.next=9,B("success","Berhasil!","Berhasil menambahkan produk!");case 9:R(),x();case 11:a.next=24;break;case 13:if("UPDATE"!==e){a.next=24;break}return a.next=16,S();case 16:if(!a.sent){a.next=24;break}return o=O(),p=o.hargaBeli,g=o.hargaJual,f=o.namaBarang,m=o.stock,I((function(a){var e={id:r,hargaBeli:p,hargaJual:g,namaBarang:f,stock:Number(null!==m&&void 0!==m?m:"0"),image:V},n=(0,t.Z)(a),s=n.findIndex((function(a){return a.id===r}));return n[s]=e,(0,t.Z)(n)})),a.next=22,B("success","Berhasil!","Berhasil mengubah produk!");case 22:R(),x();case 24:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function O(){var a,e={},r=(0,i.Z)(j);try{for(r.s();!(a=r.n()).done;){var n=a.value;e[n]=U.getFieldValue(n)}}catch(t){r.e(t)}finally{r.f()}return e}function R(){L(void 0),U.resetFields([].concat(j))}function S(){return $.apply(this,arguments)}function $(){return($=(0,c.Z)((0,n.Z)().mark((function a(){var e,r,t,s,i;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=O(),r=e.namaBarang,t=e.hargaBeli,s=e.hargaJual,i=e.stock,r&&""!==r){a.next=5;break}return a.next=4,B("warning","Peringatan!","Nama Barang tidak boleh kosong!");case 4:case 8:return a.abrupt("return",!1);case 5:if(!(isNaN(Number(t))||isNaN(Number(s))||isNaN(Number(i)))){a.next=9;break}return a.next=8,B("warning","Peringatan!","Harga barang, Harga jual, dan stock harus angka!");case 9:return a.abrupt("return",!0);case 10:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return(0,h.useEffect)((function(){if("UPDATE"===e){R(),L(void 0);var a=P.find((function(a){return a.id===r}));a&&(U.setFieldsValue({namaBarang:a.namaBarang,hargaJual:a.hargaJual,hargaBeli:a.hargaBeli,stock:a.stock}),L(a.image))}return function(){}}),[e]),(0,w.jsxs)(g.Z,(0,s.Z)((0,s.Z)({title:"Maintenance Product - (".concat(e,")")},v),{},{okButtonProps:{className:"bg-purple-500"},onCancel:function(){R(),x()},maskClosable:!1,onOk:function(){return M.apply(this,arguments)},children:[(0,w.jsxs)(o.Z,{form:U,labelCol:{span:4},colon:!1,labelAlign:"left",wrapperCol:{span:10},className:"py-4",children:[(0,w.jsx)(o.Z.Item,{label:"Nama Barang",name:"namaBarang",children:(0,w.jsx)(f.Z,{})}),(0,w.jsx)(o.Z.Item,{label:"Harga Beli",name:"hargaBeli",wrapperCol:{span:6},children:(0,w.jsx)(m.Z,{controls:!1,formatter:function(a){return"".concat(a).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(a){return a.replace(/\$\s?|(,*)/g,"")},className:"w-full",min:"0"})}),(0,w.jsx)(o.Z.Item,{label:"Harga Jual",name:"hargaJual",wrapperCol:{span:6},children:(0,w.jsx)(m.Z,{controls:!1,formatter:function(a){return"".concat(a).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(a){return a.replace(/\$\s?|(,*)/g,"")},className:"w-full",min:"0"})}),(0,w.jsx)(o.Z.Item,{label:"Stock",name:"stock",wrapperCol:{span:4},children:(0,w.jsx)(m.Z,{controls:!0,className:"w-full",min:0})}),(0,w.jsx)(o.Z.Item,{label:"Image",wrapperCol:{span:4},children:(0,w.jsx)(d.Z,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,accept:"image/png, image/jpeg",beforeUpload:function(a){var e="image/png"===a.type||"image/jpeg"===a.type;if(L(void 0),!e)return H.error("".concat(a.name," is not png / jpg file.")),!1;if(!(e=a.size<=1e5))return H.error("".concat(a.name," is to large more then 100kb.")),!1;var r=new FileReader;return r.readAsDataURL(a),r.onload=function(){L(r.result)},!0},withCredentials:!1,children:V?(0,w.jsx)("img",{src:V,alt:"avatar",style:{width:"100%"}}):y})})]}),T]}))}}}]);
//# sourceMappingURL=305.0eb2b620.chunk.js.map